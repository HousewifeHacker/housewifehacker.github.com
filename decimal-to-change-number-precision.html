<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Decimal to Change Number Precision</title>
        <link rel="stylesheet" href="http://housewifehacker.com/theme/css/main.css" />
        <link href="http://housewifehacker.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="housewife_hacker Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://housewifehacker.com/">housewife_hacker </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://housewifehacker.com/category/code.html">Code</a></li>
                    <li><a href="http://housewifehacker.com/category/reading-list.html">Reading List</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://housewifehacker.com/decimal-to-change-number-precision.html" rel="bookmark"
           title="Permalink to Decimal to Change Number Precision">Decimal to Change Number Precision</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2010-10-22T00:00:00">
                Published: October 2010
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://housewifehacker.com/author/jessie-anderson.html">Jessie Anderson</a>
        </address>
<p>In <a href="http://housewifehacker.com/category/code.html">Code</a>. </p>
<p>tags: <a href="http://housewifehacker.com/tag/python.html">python</a> <a href="http://housewifehacker.com/tag/modules.html">modules</a> <a href="http://housewifehacker.com/tag/math.html">math</a> </p>
</footer><!-- /.post-info -->      <p>The built in math functions in Python use binary approximations, giving some funky results when dealing with numbers containing decimals:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="o">.</span><span class="mi">1</span> <span class="o">+</span> <span class="o">.</span><span class="mi">2</span>
<span class="mf">0.30000000000000004</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">round</span><span class="p">(</span><span class="mf">100.00</span> <span class="o">/</span> <span class="mf">3.000</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="mf">33.333300000000001</span>
</pre></div>
<p>One way to appropriately find the sum of decimals is to use strings</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="o">.</span><span class="mi">1</span> <span class="o">+</span> <span class="o">.</span><span class="mi">2</span><span class="p">)</span>
<span class="s">&#39;0.3&#39;</span>
</pre></div>
<p>Also, the default is to round to the nearest whole number when dividing</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">100</span> <span class="o">/</span> <span class="mi">3</span>
<span class="mi">33</span>
</pre></div>
<p>The decimal library is a useful tool for floating point arithmetic. Instead of the command 'from decimal import * ' that would import everything from decimal, all I need to import is Decimal and getcontext. When importing modules, simplicity is preferred. There are less problems with naming in your code and you can be more aware of the tools at your disposal. I already imported decimal and looked through the directory to determine which modules I wanted. I'm only going to show the precision feature of decimal. You may want to import the entire library if you want to use other functions.</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">getcontext</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">getcontext</span><span class="p">()</span>
<span class="n">Context</span><span class="p">(</span><span class="n">prec</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span> <span class="n">rounding</span><span class="o">=</span><span class="n">ROUND_HALF_UP</span><span class="p">,</span> <span class="n">Emin</span><span class="o">=-</span><span class="mi">999999999</span><span class="p">,</span>
<span class="n">Emax</span><span class="o">=</span><span class="mi">999999999</span><span class="p">,</span> <span class="n">capitals</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="n">Inexact</span><span class="p">,</span> <span class="n">Rounded</span><span class="p">],</span>
<span class="n">traps</span><span class="o">=</span><span class="p">[</span><span class="n">DivisionByZero</span><span class="p">,</span> <span class="n">Overflow</span><span class="p">,</span> <span class="n">InvalidOperation</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c">#our precision is also known as significant figures, applied after arithmetic</span>
<span class="o">...</span> <span class="c">#let&#39;s change our precision</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;7&#39;</span><span class="p">)</span>        <span class="c"># can be performed to strings</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;0.142857&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>        <span class="c"># can be performed to integers</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;0.142857&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.42857&#39;</span><span class="p">)</span>        <span class="c"># notice that 6 is the total number of figures, not the number after the decimal</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">)</span>        <span class="c"># not &#39;2.00000,&#39; which is considered more accurate than 2 by the science community</span>
</pre></div>
<p>As someone with a science background, I found the decimal library's use of 'significant figures' interesting. Decimal can also be used in financial reporting or billing. You can also find maximums and minimums, change rounding properties, and do anything that you can do with the math library. I personally prefer the math library for the algebraic functions performed by decimal, because math's syntax is simpler. To learn more about decimal, go to <a class="reference external" href="http://docs.python.org/library/decimal.html">http://docs.python.org/library/decimal.html</a></p>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                            <li><a href="http://python.org">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://housewifehacker.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="http://twitter.com/housewifehacker">Follow Me On Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>